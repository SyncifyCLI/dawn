{
  "version": 3,
  "sources": ["../../source/assets/scripts/quick-add.js"],
  "sourcesContent": ["if (!customElements.get('quick-add-modal')) {\n  customElements.define(\n    'quick-add-modal',\n    class QuickAddModal extends ModalDialog {\n      constructor() {\n        super();\n        this.modalContent = this.querySelector('[id^=\"QuickAddInfo-\"]');\n\n        this.addEventListener('product-info:loaded', ({ target }) => {\n          target.addPreProcessCallback(this.preprocessHTML.bind(this));\n        });\n      }\n\n      hide(preventFocus = false) {\n        const cartNotification = document.querySelector('cart-notification') || document.querySelector('cart-drawer');\n        if (cartNotification) cartNotification.setActiveElement(this.openedBy);\n        this.modalContent.innerHTML = '';\n\n        if (preventFocus) this.openedBy = null;\n        super.hide();\n      }\n\n      show(opener) {\n        opener.setAttribute('aria-disabled', true);\n        opener.classList.add('loading');\n        opener.querySelector('.loading__spinner').classList.remove('hidden');\n\n        fetch(opener.getAttribute('data-product-url'))\n          .then((response) => response.text())\n          .then((responseText) => {\n            const responseHTML = new DOMParser().parseFromString(responseText, 'text/html');\n            const productElement = responseHTML.querySelector('product-info');\n\n            this.preprocessHTML(productElement);\n            HTMLUpdateUtility.setInnerHTML(this.modalContent, productElement.outerHTML);\n\n            if (window.Shopify && Shopify.PaymentButton) {\n              Shopify.PaymentButton.init();\n            }\n            if (window.ProductModel) window.ProductModel.loadShopifyXR();\n\n            super.show(opener);\n          })\n          .finally(() => {\n            opener.removeAttribute('aria-disabled');\n            opener.classList.remove('loading');\n            opener.querySelector('.loading__spinner').classList.add('hidden');\n          });\n      }\n\n      preprocessHTML(productElement) {\n        productElement.classList.forEach((classApplied) => {\n          if (classApplied.startsWith('color-') || classApplied === 'gradient')\n            this.modalContent.classList.add(classApplied);\n        });\n        this.preventDuplicatedIDs(productElement);\n        this.removeDOMElements(productElement);\n        this.removeGalleryListSemantic(productElement);\n        this.updateImageSizes(productElement);\n        this.preventVariantURLSwitching(productElement);\n      }\n\n      preventVariantURLSwitching(productElement) {\n        productElement.setAttribute('data-update-url', 'false');\n      }\n\n      removeDOMElements(productElement) {\n        const pickupAvailability = productElement.querySelector('pickup-availability');\n        if (pickupAvailability) pickupAvailability.remove();\n\n        const productModal = productElement.querySelector('product-modal');\n        if (productModal) productModal.remove();\n\n        const modalDialog = productElement.querySelectorAll('modal-dialog');\n        if (modalDialog) modalDialog.forEach((modal) => modal.remove());\n      }\n\n      preventDuplicatedIDs(productElement) {\n        const sectionId = productElement.dataset.section;\n\n        const oldId = sectionId;\n        const newId = `quickadd-${sectionId}`;\n        productElement.innerHTML = productElement.innerHTML.replaceAll(oldId, newId);\n        Array.from(productElement.attributes).forEach((attribute) => {\n          if (attribute.value.includes(oldId)) {\n            productElement.setAttribute(attribute.name, attribute.value.replace(oldId, newId));\n          }\n        });\n\n        productElement.dataset.originalSection = sectionId;\n      }\n\n      removeGalleryListSemantic(productElement) {\n        const galleryList = productElement.querySelector('[id^=\"Slider-Gallery\"]');\n        if (!galleryList) return;\n\n        galleryList.setAttribute('role', 'presentation');\n        galleryList.querySelectorAll('[id^=\"Slide-\"]').forEach((li) => li.setAttribute('role', 'presentation'));\n      }\n\n      updateImageSizes(productElement) {\n        const product = productElement.querySelector('.product');\n        const desktopColumns = product?.classList.contains('product--columns');\n        if (!desktopColumns) return;\n\n        const mediaImages = product.querySelectorAll('.product__media img');\n        if (!mediaImages.length) return;\n\n        let mediaImageSizes =\n          '(min-width: 1000px) 715px, (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)';\n\n        if (product.classList.contains('product--medium')) {\n          mediaImageSizes = mediaImageSizes.replace('715px', '605px');\n        } else if (product.classList.contains('product--small')) {\n          mediaImageSizes = mediaImageSizes.replace('715px', '495px');\n        }\n\n        mediaImages.forEach((img) => img.setAttribute('sizes', mediaImageSizes));\n      }\n    }\n  );\n}\n"],
  "mappings": "AAAK,eAAe,IAAI,iBAAiB,GACvC,eAAe,OACb,kBACA,cAA4B,WAAY,CACtC,aAAc,CACZ,MAAM,EACN,KAAK,aAAe,KAAK,cAAc,uBAAuB,EAE9D,KAAK,iBAAiB,sBAAuB,CAAC,CAAE,OAAAA,CAAO,IAAM,CAC3DA,EAAO,sBAAsB,KAAK,eAAe,KAAK,IAAI,CAAC,CAC7D,CAAC,CACH,CAEA,KAAKC,EAAe,GAAO,CACzB,IAAMC,EAAmB,SAAS,cAAc,mBAAmB,GAAK,SAAS,cAAc,aAAa,EACxGA,GAAkBA,EAAiB,iBAAiB,KAAK,QAAQ,EACrE,KAAK,aAAa,UAAY,GAE1BD,IAAc,KAAK,SAAW,MAClC,MAAM,KAAK,CACb,CAEA,KAAKE,EAAQ,CACXA,EAAO,aAAa,gBAAiB,EAAI,EACzCA,EAAO,UAAU,IAAI,SAAS,EAC9BA,EAAO,cAAc,mBAAmB,EAAE,UAAU,OAAO,QAAQ,EAEnE,MAAMA,EAAO,aAAa,kBAAkB,CAAC,EAC1C,KAAMC,GAAaA,EAAS,KAAK,CAAC,EAClC,KAAMC,GAAiB,CAEtB,IAAMC,EADe,IAAI,UAAU,EAAE,gBAAgBD,EAAc,WAAW,EAC1C,cAAc,cAAc,EAEhE,KAAK,eAAeC,CAAc,EAClC,kBAAkB,aAAa,KAAK,aAAcA,EAAe,SAAS,EAEtE,OAAO,SAAW,QAAQ,eAC5B,QAAQ,cAAc,KAAK,EAEzB,OAAO,cAAc,OAAO,aAAa,cAAc,EAE3D,MAAM,KAAKH,CAAM,CACnB,CAAC,EACA,QAAQ,IAAM,CACbA,EAAO,gBAAgB,eAAe,EACtCA,EAAO,UAAU,OAAO,SAAS,EACjCA,EAAO,cAAc,mBAAmB,EAAE,UAAU,IAAI,QAAQ,CAClE,CAAC,CACL,CAEA,eAAeG,EAAgB,CAC7BA,EAAe,UAAU,QAASC,GAAiB,EAC7CA,EAAa,WAAW,QAAQ,GAAKA,IAAiB,aACxD,KAAK,aAAa,UAAU,IAAIA,CAAY,CAChD,CAAC,EACD,KAAK,qBAAqBD,CAAc,EACxC,KAAK,kBAAkBA,CAAc,EACrC,KAAK,0BAA0BA,CAAc,EAC7C,KAAK,iBAAiBA,CAAc,EACpC,KAAK,2BAA2BA,CAAc,CAChD,CAEA,2BAA2BA,EAAgB,CACzCA,EAAe,aAAa,kBAAmB,OAAO,CACxD,CAEA,kBAAkBA,EAAgB,CAChC,IAAME,EAAqBF,EAAe,cAAc,qBAAqB,EACzEE,GAAoBA,EAAmB,OAAO,EAElD,IAAMC,EAAeH,EAAe,cAAc,eAAe,EAC7DG,GAAcA,EAAa,OAAO,EAEtC,IAAMC,EAAcJ,EAAe,iBAAiB,cAAc,EAC9DI,GAAaA,EAAY,QAASC,GAAUA,EAAM,OAAO,CAAC,CAChE,CAEA,qBAAqBL,EAAgB,CACnC,IAAMM,EAAYN,EAAe,QAAQ,QAEnCO,EAAQD,EACRE,EAAQ,YAAYF,CAAS,GACnCN,EAAe,UAAYA,EAAe,UAAU,WAAWO,EAAOC,CAAK,EAC3E,MAAM,KAAKR,EAAe,UAAU,EAAE,QAASS,GAAc,CACvDA,EAAU,MAAM,SAASF,CAAK,GAChCP,EAAe,aAAaS,EAAU,KAAMA,EAAU,MAAM,QAAQF,EAAOC,CAAK,CAAC,CAErF,CAAC,EAEDR,EAAe,QAAQ,gBAAkBM,CAC3C,CAEA,0BAA0BN,EAAgB,CACxC,IAAMU,EAAcV,EAAe,cAAc,wBAAwB,EACpEU,IAELA,EAAY,aAAa,OAAQ,cAAc,EAC/CA,EAAY,iBAAiB,gBAAgB,EAAE,QAASC,GAAOA,EAAG,aAAa,OAAQ,cAAc,CAAC,EACxG,CAEA,iBAAiBX,EAAgB,CAC/B,IAAMY,EAAUZ,EAAe,cAAc,UAAU,EAEvD,GAAI,EADmBY,GAAA,YAAAA,EAAS,UAAU,SAAS,qBAC9B,OAErB,IAAMC,EAAcD,EAAQ,iBAAiB,qBAAqB,EAClE,GAAI,CAACC,EAAY,OAAQ,OAEzB,IAAIC,EACF,gGAEEF,EAAQ,UAAU,SAAS,iBAAiB,EAC9CE,EAAkBA,EAAgB,QAAQ,QAAS,OAAO,EACjDF,EAAQ,UAAU,SAAS,gBAAgB,IACpDE,EAAkBA,EAAgB,QAAQ,QAAS,OAAO,GAG5DD,EAAY,QAASE,GAAQA,EAAI,aAAa,QAASD,CAAe,CAAC,CACzE,CACF,CACF",
  "names": ["target", "preventFocus", "cartNotification", "opener", "response", "responseText", "productElement", "classApplied", "pickupAvailability", "productModal", "modalDialog", "modal", "sectionId", "oldId", "newId", "attribute", "galleryList", "li", "product", "mediaImages", "mediaImageSizes", "img"]
}
