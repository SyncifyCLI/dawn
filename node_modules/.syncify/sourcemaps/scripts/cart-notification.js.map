{
  "version": 3,
  "sources": ["../../source/assets/scripts/cart-notification.js"],
  "sourcesContent": ["class CartNotification extends HTMLElement {\n  constructor() {\n    super();\n\n    this.notification = document.getElementById('cart-notification');\n    this.header = document.querySelector('sticky-header');\n    this.onBodyClick = this.handleBodyClick.bind(this);\n\n    this.notification.addEventListener('keyup', (evt) => evt.code === 'Escape' && this.close());\n    this.querySelectorAll('button[type=\"button\"]').forEach((closeButton) =>\n      closeButton.addEventListener('click', this.close.bind(this))\n    );\n  }\n\n  open() {\n    this.notification.classList.add('animate', 'active');\n\n    this.notification.addEventListener(\n      'transitionend',\n      () => {\n        this.notification.focus();\n        trapFocus(this.notification);\n      },\n      { once: true }\n    );\n\n    document.body.addEventListener('click', this.onBodyClick);\n  }\n\n  close() {\n    this.notification.classList.remove('active');\n    document.body.removeEventListener('click', this.onBodyClick);\n\n    removeTrapFocus(this.activeElement);\n  }\n\n  renderContents(parsedState) {\n    this.cartItemKey = parsedState.key;\n    this.getSectionsToRender().forEach((section) => {\n      document.getElementById(section.id).innerHTML = this.getSectionInnerHTML(\n        parsedState.sections[section.id],\n        section.selector\n      );\n    });\n\n    if (this.header) this.header.reveal();\n    this.open();\n  }\n\n  getSectionsToRender() {\n    return [\n      {\n        id: 'cart-notification-product',\n        selector: `[id=\"cart-notification-product-${this.cartItemKey}\"]`,\n      },\n      {\n        id: 'cart-notification-button',\n      },\n      {\n        id: 'cart-icon-bubble',\n      },\n    ];\n  }\n\n  getSectionInnerHTML(html, selector = '.shopify-section') {\n    return new DOMParser().parseFromString(html, 'text/html').querySelector(selector).innerHTML;\n  }\n\n  handleBodyClick(evt) {\n    const target = evt.target;\n    if (target !== this.notification && !target.closest('cart-notification')) {\n      const disclosure = target.closest('details-disclosure, header-menu');\n      this.activeElement = disclosure ? disclosure.querySelector('summary') : null;\n      this.close();\n    }\n  }\n\n  setActiveElement(element) {\n    this.activeElement = element;\n  }\n}\n\ncustomElements.define('cart-notification', CartNotification);\n"],
  "mappings": "AAAA,IAAMA,EAAN,cAA+B,WAAY,CACzC,aAAc,CACZ,MAAM,EAEN,KAAK,aAAe,SAAS,eAAe,mBAAmB,EAC/D,KAAK,OAAS,SAAS,cAAc,eAAe,EACpD,KAAK,YAAc,KAAK,gBAAgB,KAAK,IAAI,EAEjD,KAAK,aAAa,iBAAiB,QAAUC,GAAQA,EAAI,OAAS,UAAY,KAAK,MAAM,CAAC,EAC1F,KAAK,iBAAiB,uBAAuB,EAAE,QAASC,GACtDA,EAAY,iBAAiB,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,CAC7D,CACF,CAEA,MAAO,CACL,KAAK,aAAa,UAAU,IAAI,UAAW,QAAQ,EAEnD,KAAK,aAAa,iBAChB,gBACA,IAAM,CACJ,KAAK,aAAa,MAAM,EACxB,UAAU,KAAK,YAAY,CAC7B,EACA,CAAE,KAAM,EAAK,CACf,EAEA,SAAS,KAAK,iBAAiB,QAAS,KAAK,WAAW,CAC1D,CAEA,OAAQ,CACN,KAAK,aAAa,UAAU,OAAO,QAAQ,EAC3C,SAAS,KAAK,oBAAoB,QAAS,KAAK,WAAW,EAE3D,gBAAgB,KAAK,aAAa,CACpC,CAEA,eAAeC,EAAa,CAC1B,KAAK,YAAcA,EAAY,IAC/B,KAAK,oBAAoB,EAAE,QAASC,GAAY,CAC9C,SAAS,eAAeA,EAAQ,EAAE,EAAE,UAAY,KAAK,oBACnDD,EAAY,SAASC,EAAQ,EAAE,EAC/BA,EAAQ,QACV,CACF,CAAC,EAEG,KAAK,QAAQ,KAAK,OAAO,OAAO,EACpC,KAAK,KAAK,CACZ,CAEA,qBAAsB,CACpB,MAAO,CACL,CACE,GAAI,4BACJ,SAAU,kCAAkC,KAAK,WAAW,IAC9D,EACA,CACE,GAAI,0BACN,EACA,CACE,GAAI,kBACN,CACF,CACF,CAEA,oBAAoBC,EAAMC,EAAW,mBAAoB,CACvD,OAAO,IAAI,UAAU,EAAE,gBAAgBD,EAAM,WAAW,EAAE,cAAcC,CAAQ,EAAE,SACpF,CAEA,gBAAgBL,EAAK,CACnB,IAAMM,EAASN,EAAI,OACnB,GAAIM,IAAW,KAAK,cAAgB,CAACA,EAAO,QAAQ,mBAAmB,EAAG,CACxE,IAAMC,EAAaD,EAAO,QAAQ,iCAAiC,EACnE,KAAK,cAAgBC,EAAaA,EAAW,cAAc,SAAS,EAAI,KACxE,KAAK,MAAM,CACb,CACF,CAEA,iBAAiBC,EAAS,CACxB,KAAK,cAAgBA,CACvB,CACF,EAEA,eAAe,OAAO,oBAAqBT,CAAgB",
  "names": ["CartNotification", "evt", "closeButton", "parsedState", "section", "html", "selector", "target", "disclosure", "element"]
}
